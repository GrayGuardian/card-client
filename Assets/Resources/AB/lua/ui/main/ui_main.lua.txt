local base = require("ui_base")
local UI = class("main", base)

----------------UI配置------------------
function UI:GET_AB()
    return "ui1"
end
function UI:GET_DEFAULT_OPTS()
    return {blockInput = false, blackMask = 0}
end
----------------UI配置------------------
function UI:onLoad()
    self.page = self.param.page or 0
    self.pageParam = self.param.pageParam

    self.top_msg_view = ui:showUI("ui_top_msg")
    self.bottom_list_view = ui:showUI("ui_bottom_list")

    self:refreshPageView()

    --卡牌测试
    -- local node = GameObject.Instantiate(self:load_gameObject("prefab1", "card_own_item")).transform
    -- node.parent = self.node
    -- node.localPosition = {x = 0, y = 0, z = 0}
    -- node.localScale = {x = 1.0, y = 1.0, z = 1.0}
    -- comp:addComponent(node, "card_own_item", {info = player.cardMap[1]})
end
function UI:refreshPageView(page, pageParam)
    self.page = page or self.page
    self.pageParam = pageParam or self.pageParam

    if (self.page_view ~= nil) then
        if (self.page == self.page_view:GET_PAGE()) then
            -- 避免重复加载
            return
        end
        self.page_view:close()
    end
    self.page_view = ui:showUI(string.format("ui_main_page%s", self.page, self.pageParam))
end

function UI:onDestroy()
    self.top_msg_view:close()
    self.bottom_list_view:close()

    if (self.page_view ~= nil) then
        self.page_view:close()
    end
end

function UI:onLogoutBtnClick()
    print("注销")
    gameLogic.reelectUser()
end
function UI:onReelectBtnClick()
    print("重选角色")
    gameLogic.reelectPlayer()
end
function UI:onPage0BtnClick()
    print("切换主页页面0")
    self:refreshPageView(0)
end
function UI:onPage1BtnClick()
    print("切换主页页面1")
    self:refreshPageView(1)
end
return UI
